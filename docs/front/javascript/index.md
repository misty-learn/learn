# JavaScript基础

::: tip 

这里主要记录ES5和ES6的新特性，以及ES6中常用的基本知识和语法库

:::

## 块级作用域

只要被`{}`包起来的就是块级作用域（函数除外）

当`var`定义的变量被放到块级作用域的时候也是可以在外面被访问的

通过`let`定义的变量无法被块级作用域以外的访问到
```js
{
    var info = 1;
    let s = 12;
}
// 可以拿到值
console.log(info);
console.log(s); // 拿到的数据是undefined
```

## 局部作用域

函数内被`{}`包裹起来的就是局部作用域

当`var`定义的变量在局部作用域的时候，不可以被函数外的方法访问

通过`let`定义的变量无法被局部作用域以外的访问到
```js

function info() {
    var gg = 123;
    let sjj = 122;
}

console.log(gg,sjj) // 打印不出来数据，都是undefined

```

## 作用域链

### ES6之前

* 全局作用域我们又称之为0级作用域
* 定义函数开启的作用域就是1级/2级/3级/...作用域
* JavaScript会将这些作用域链接在一起形成一个链条，这个链条就是作用域链   
  0 ---> 1 ---> 2 ...
* 除0级作用域以外，当前作用域级别等于上一级+1

**变量在作用域链查找规则：**
1. 先在当前找，找到就使用当前作用域找到的
2. 如果当前作用域中没找到，就去上一级作用域中查找
3. 以此类推直到0级为止，若果0级作用域还未找到，就报错

```js
// 0 级作用域
var num = 123;
console.log(num) // 123
function demo() {
    // 1级作用域
    var num = 456;
    console.log(num) // 456
    function test() {
        // 二级作用域
        var num = 789;
        console.log(num) // 789;
    }
    test();
}
demo();

```

### ES6

1. ES6定义变量通过`let`定义
2. ES6除了全局作用域、局部作用域以外，还新增了块级作用域
3. ES6虽然新增了块级作用域，但是通过let定义变量并无差异（都是局部变量）

* 全局作用域我们又称之为0级作用域
* 定义`函数或代码块`开启的作用域就是1级/2级/3级/...作用域
* JavaScript会将这些作用域链接在一起形成一个链条，这个链条就是作用域链   
  0 ---> 1 ---> 2 ...
* 除0级作用域以外，当前作用域级别等于上一级+1

**查找方法也是和ES6以前是相同的**

## 函数预解析

### 变量的预解析规则

* 将变量声明和函数声明提升到当前作用域最前面
* 将剩余代码按照书写顺序依次放到后面
* 通过`let`定义的变量不会被提升（不会被预解析）

### 函数预解析规则

* ES6之前的定义函数的方式是会被解析的
```js

test();
function test() {
    console.log("hello word")
}

```
* 如果将函数赋值给一个var定义的变量，那么函数不会被预解析，只有变量会被预解析
```js

test() // 报错 test is not a function

var test = function () {
  console.log("hello word")
}

```
* 使用ES6的方式定义一个函数，不会做预解析
```js

test(); // test is not defined
let test = () => {
    console.log("hello word")
}

```
